#!/usr/bin/env python3# -*- coding: utf-8 -*-"""Created on Tue Nov  9 18:33:11 2021@author: GAO Yuan"""import mathimport matplotlib.pyplot as plt# data loadingf = open("BA.csv")data = f.readlines()f.close()# Q1# a)headers = data[0]allData = data[1:]N = len(allData)prices = [float(i.split(",")[1].strip()) for i in allData]dates = [i.split(",")[0] for i in allData]# b)# period nn = 3def get_moving_average(prices, n):    ma = []    for i in range(len(prices)):        if i+1<n:            ma.append(None)        else:            cumsum = 0            for j in range(n):                cumsum += prices[i-j]            ma.append(cumsum/n)        # sum(prices[i-n:i])/n    return mama = get_moving_average(prices,n)        # c)prices_test = [2,3,4,5,8,5,4,3,2,1]n = 3ma = get_moving_average(prices_test,n)# d)n = 252ma_252 = get_moving_average(prices, n)# e)print(ma_252[250]) # position 251print(ma_252[251]) # position 252# the first moving average value is 119.15963196031747 at position 252# f)n=60ma_60 = get_moving_average(prices, n)# extra)plt.figure(figsize=(12, 8))plt.plot(prices, 'go-', label = "prices")plt.plot(ma_252, 'b-', label = "ma_252")plt.plot(ma_60, 'm-', label = "ma_60")plt.title('Boeing 252-day Moving Average', fontsize = 20)plt.xlabel('Time Step', fontsize = 15)plt.ylabel('Adjusted Closing Price', fontsize = 15)plt.autoscale(enable = True, tight = True) # or for specific axis axis='x'plt.legend(loc = "upper left", fontsize = 15)plt.show()# Q2# a)busDays = 252rf = 0.011555# b)# R is log returnR = [None] + [math.log(prices[i]/prices[i-1]) for i in range(1,len(prices))]# c)sum_R = 0n_days = 0for r in R:    if r is None:        continue    sum_R += r    n_days += 1muR = sum_R/n_days # here n_days is length of the list - 1.#muR = sum(R[1:])/(len(R)-1)muR_annual = muR * busDays# d)sum_sq = 0for r in R:    if r is None:        continue    sum_sq += (r-muR)**2sigmaR = (sum_sq/(n_days-1))**0.5sigmaR_annual = sigmaR * n_days**0.5# e)highPt = float('-inf')lowPt = float('inf')for r in R:    if r is None:        continue    if r > highPt:        highPt = r    elif r < lowPt:        lowPt = r        # f)SR = (muR_annual - rf)/sigmaR_annual# g) print("Mean daily log return is {:.4f}. Annualised mean log return is {:.4f}.".format(muR,muR_annual))print("Daily volatility is {:.2f}. Annualised volatility is {:.2f}".format(sigmaR,sigmaR_annual))print("Sharpe Ratio is {:.2f}, which is much lower than 1".format(SR))print("Not worth investing. The volatility is too high for the 6% return, comparing to S&P500's around 0.15 volatility")"""muR: 0.0003muR_annual: 0.0657sigmaR: 0.03sigmaR_annual: 1.01Sharpe Ratio: 0.05"""